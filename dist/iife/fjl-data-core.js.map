{"version":3,"file":"fjl-data-core.js","sources":["../../src/functor/Functor.js","../../src/utils.js","../../src/functor/Apply.js","../../src/functor/Applicative.js","../../src/monad/Monad.js","../../src/maybe/Nothing.js","../../src/maybe/Just.js","../../src/maybe/Maybe.js","../../src/either/Either.js","../../src/io/IO.js","../../src/fjlDataCore.js"],"sourcesContent":["/**\r\n * Created by edlc on 12/9/16.\r\n */\r\nexport default class Functor {\r\n    constructor(value) {\r\n        this.value = value;\r\n    }\r\n    valueOf() {\r\n        return this.value;\r\n    }\r\n    map(fn) {\r\n        return new this.constructor(fn(this.valueOf()));\r\n    }\r\n    fmap (fn) {\r\n        return this.map(fn);\r\n    }\r\n}\r\n","import {isFunction} from 'fjl';\r\nimport Functor from './functor/Functor';\r\n\r\nexport const\r\n    toFunction = x => isFunction(x) ? x : () => x,\r\n    alwaysFunctor = x => !x.map ? new Functor(x) : x\r\n;\r\n","/**\r\n * Created by edlc on 12/9/16.\r\n */\r\n\r\nimport {toFunction} from '../utils';\r\nimport Functor from './Functor';\r\n\r\nexport default class Apply extends Functor {\r\n    ap (x) {\r\n        return x.map(toFunction(this.valueOf()));\r\n    }\r\n}\r\n","/**\r\n * Created by edlc on 12/9/16.\r\n */\r\nimport Apply from './Apply';\r\n\r\nexport default class Applicative extends Apply {\r\n    static of (value) {\r\n        return new Applicative(value);\r\n    }\r\n}\r\n","/**\r\n * Created by edlc on 12/9/16.\r\n * Basic `Monad` class.  Used to extend from to create `Maybe` and `Either` module/classes.\r\n * @module Monad\r\n * @see `Maybe` reference: http://hackage.haskell.org/package/base-4.10.1.0/docs/Data-Maybe.html\r\n * @see `Either` reference: http://hackage.haskell.org/package/base-4.10.1.0/docs/Data-Either.html\r\n */\r\n\r\nimport {curry} from 'fjl';\r\nimport Applicative from '../functor/Applicative';\r\n\r\nexport const\r\n    isMonad = value => value instanceof Monad,\r\n    valueOf = x => x.valueOf(),\r\n    join = x => x.join(),\r\n    fmap = curry((fn, x) => x.map(fn)),\r\n    ap = curry((applicative, functor) => applicative.ap(functor)),\r\n    flatMap = curry((fn, monad) => monad.flatMap(fn));\r\n\r\nexport default class Monad extends Applicative {\r\n    join () {\r\n        return this.valueOf();\r\n    }\r\n    flatMap (fn) {\r\n        const out = fn(this.join());\r\n        return !(out instanceof this.constructor) ?\r\n            this.constructor.of(out) : out;\r\n    }\r\n    chain (fn) {\r\n        return this.flatMap(fn);\r\n    }\r\n    static of (x) { return new Monad(x); }\r\n    static isMonad (x) { return isMonad(x); }\r\n}\r\n","let NothingSingleton;\r\n\r\nfunction Nothing () {\r\n    if (NothingSingleton) {\r\n        return NothingSingleton;\r\n    }\r\n    else if (!(this instanceof Nothing)) {\r\n        return new Nothing();\r\n    }\r\n    NothingSingleton = this;\r\n    Object.freeze(NothingSingleton);\r\n}\r\n\r\nconst isNothing = x => x === NothingSingleton,\r\n\r\n    // Prototypical stuff\r\n    returnThis = function () { return this; },\r\n    {prototype} = Nothing;\r\n\r\n// Methods\r\nprototype.valueOf   = returnThis;\r\nprototype.join      = returnThis;\r\nprototype.map       = returnThis;\r\nprototype.ap        = returnThis;\r\nprototype.flatMap   = returnThis;\r\n\r\n// Set statics\r\nNothing.of  = () => new Nothing();\r\nNothing.isNothing = isNothing;\r\n\r\n// Object.freeze makes properties on object immutable\r\n// @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze\r\n// Saves us from having to do the following (great!):\r\n// Object.defineProperties(Nothing, {\r\n//     of: {value: () => new Nothing(), enumerable: true},\r\n//     isNothing: {value: isNothing, enumerable: true}\r\n// });\r\nObject.freeze(Nothing);\r\n\r\nexport {isNothing};\r\n\r\nexport default Nothing;\r\n","import Nothing, {isNothing} from './Nothing';\r\nimport Monad from '../monad/Monad';\r\nimport {isset} from 'fjl';\r\n\r\nexport const isJust = x => x instanceof Just;\r\n\r\nexport default class Just extends Monad {\r\n    map (fn) {\r\n        const {constructor} = this,\r\n            value = this.valueOf();\r\n        return isset(value) && !isNothing(value) ? constructor.of(fn(value)) :\r\n            constructor.counterConstructor.of(value);\r\n    }\r\n    static of (x) { return new Just(x); }\r\n    static isJust (x) { return isJust(x); }\r\n}\r\n\r\nJust.counterConstructor = Nothing;\r\n","import Just, {isJust} from './Just';\r\nimport Nothing, {isNothing} from './Nothing';\r\nimport {isset, curry, id} from 'fjl';\r\n\r\nexport {Just, isJust, isNothing, Nothing};\r\n\r\nexport const\r\n    /**\r\n     * @param replacement {*}\r\n     * @param fn {Function} - Some operation.\r\n     * @param maybeInst {(Nothing|Just|*)} - Maybe instance or non\r\n     */\r\n    maybe = curry((replacement, fn, maybeInst) => {\r\n        const subject = isset(maybeInst) && isMaybe(maybeInst) ? maybeInst.map(id) : Nothing.of();\r\n        return isNothing(subject) ? replacement : subject.map(fn).join();\r\n    }),\r\n\r\n    isMaybe = x => isNothing(x) || isJust(x);\r\n\r\nfunction Maybe (x) {\r\n    return isset(x) ? Just.of(x) : Nothing.of();\r\n}\r\n\r\nMaybe.of = x => Maybe(x);\r\n\r\nexport default Maybe;\r\n","/**\r\n * Created by elyde on 12/10/2016.\r\n */\r\n\r\nimport {isset, curry, id} from 'fjl';\r\nimport {Just} from '../maybe/Maybe';\r\nimport Monad from '../monad/Monad';\r\nimport {alwaysFunctor, toFunction} from '../utils';\r\n\r\nclass Left extends Monad {\r\n    static of (x) { return new Left(x); }\r\n}\r\n\r\nclass Right extends Just {\r\n    map (fn) {\r\n        const value = this.valueOf();\r\n        if (isLeft(value)) {\r\n            return value;\r\n        }\r\n        else if (!isset(value)) {\r\n            return Left.of(\r\n                `TypeError: Cannot operate on \\`null\\` and/or \\`undefined\\`.  ` +\r\n                `Value given \\`${value}\\`.`\r\n            );\r\n        }\r\n        return Right.of(fn(value));\r\n    }\r\n\r\n    static of (x) { return new Right(x); }\r\n}\r\n\r\nexport const\r\n\r\n    isRight = x => x instanceof Right,\r\n\r\n    isLeft = x => x instanceof Left,\r\n\r\n    either = curry((leftCallback, rightCallback, monad) => {\r\n        const identity = alwaysFunctor(monad).map(id);\r\n        switch (identity.constructor) {\r\n            case Left:\r\n                return identity.map(toFunction(leftCallback)).join();\r\n            case Right:\r\n                return identity.map(toFunction(rightCallback)).join();\r\n            default:\r\n                return Left.of(monad).map(leftCallback).join();\r\n        }\r\n    });\r\n\r\nexport {Left, Right};\r\n\r\n","/**\r\n * Created by elydelacruz on 2/19/2017.\r\n */\r\n\r\nimport Monad from '../monad/Monad';\r\nimport {toFunction} from '../utils';\r\nimport {id} from 'fjl';\r\n\r\nexport default class IO extends Monad {\r\n    constructor(fn) {\r\n        super(toFunction(fn));\r\n    }\r\n\r\n    static of(fn) {\r\n        return new IO(fn);\r\n    }\r\n\r\n    static isIO (x) {\r\n        return x instanceof IO;\r\n    }\r\n\r\n    flatMap (fn) {\r\n        const out = fn(this.join()());\r\n        return !(out instanceof this.constructor) ?\r\n            IO.of(out) : IO.of(out.join()());\r\n    }\r\n\r\n    static do (io, ...args) {\r\n        return (IO.isIO(io) ? io : IO.of(io)).fork(...args);\r\n    }\r\n\r\n    fork (...args) {\r\n        return IO.of(setTimeout(() => this.join()(...args), 0));\r\n    }\r\n\r\n}\r\n","/**\r\n * Created by elydelacruz on 2/19/2017.\r\n * @module fjlDataCore\r\n * Core monad types (useful for javascript).\r\n */\r\nexport * from './monad/Monad';\r\nexport * from './maybe/Maybe';\r\nexport * from './either/Either';\r\nexport * from './io/IO';\r\nexport * from './utils';\r\n"],"names":["Functor","value","fn","constructor","valueOf","map","toFunction","isFunction","x","alwaysFunctor","Apply","Applicative","isMonad","Monad","join","fmap","curry","ap","applicative","functor","flatMap","monad","out","of","NothingSingleton","Nothing","freeze","isNothing","returnThis","prototype","Object","isJust","Just","isset","counterConstructor","maybe","replacement","maybeInst","subject","isMaybe","id","Left","Right","isLeft","isRight","either","leftCallback","rightCallback","identity","IO","args","setTimeout","io","isIO","fork"],"mappings":"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"}